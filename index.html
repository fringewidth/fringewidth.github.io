<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hrishik</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <div id="navbar"></div>
  <div id="content"></div>
  <footer><div id="footer"></div></footer>
  <script>
    function loadMd(id, file) {
      $.get(file, md => $(id).html(marked.parse(md)))
    }

    function getParam(name) {
      return new URLSearchParams(window.location.search).get(name)
    }

    $(function () {
      $.getJSON("config.json", config => {
        loadMd("#navbar", config.navbar)
        const contentFile = getParam("content") || config.home
        loadMd("#content", contentFile)
        loadMd("#footer", config.footer)
      })
    })

    $(document).on("click", 'a[href$=".md"]', e => {
      e.preventDefault()
      const href = $(e.currentTarget).attr("href")
      history.pushState(null, '', '?content=' + href)
      loadMd("#content", href)
    })

    $(window).on("popstate", () => {
      $.getJSON("config.json", config => {
        const contentFile = getParam("content") || config.home
        loadMd("#content", contentFile)
      })
    })
  </script>
</body>
</html>
